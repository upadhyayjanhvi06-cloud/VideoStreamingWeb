<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title><%= video.title %> - Mini VideoHub</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    color: white;
    display: flex;
    justify-content: center;
    padding: 30px;
}

.card {
    background: #111;
    width: 420px;
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.6);
}

video {
    width: 100%;
    border-radius: 12px;
}

.actions {
    display: flex;
    justify-content: space-between;
    margin-top: 15px;
}

button {
    background: none;
    border: none;
    color: white;
    font-size: 22px;
    cursor: pointer;
    position: relative;
}

button:hover {
    transform: scale(1.2);
}

/* Animations */
.heart { color: red; font-size: 40px; position:absolute; animation: pop 0.8s forwards; }
.arrow { color: white; font-size: 35px; position:absolute; animation: fly 1s forwards; }
.thumb { color:#00ffcc; font-size:35px; position:absolute; animation: rise 1s forwards; }

@keyframes pop { 0%{scale:0} 50%{scale:1.4} 100%{opacity:0; scale:2} }
@keyframes fly { to{opacity:0; transform:translateX(120px)} }
@keyframes rise { to{opacity:0; transform:translateY(-80px)} }

/* Extra actions */
.extra-actions {
    display: flex;
    justify-content: space-around;
    margin-top: 10px;
    font-size: 14px;
}

.extra-actions span {
    cursor: pointer;
    color: #ccc;
}

.extra-actions span:hover {
    color: #00ffcc;
}

/* Description */
.description {
    background: #1a1a1a;
    padding: 10px;
    border-radius: 8px;
    margin-top: 15px;
    font-size: 14px;
}

/* Comments */
.comments { margin-top: 15px; }
input { width:100%; padding:10px; border-radius:8px; border:none; }
.comment-list { font-size:14px; margin-top:10px; }

/* Recommended videos */
.recommend {
    margin-top: 20px;
}

.recommend h3 {
    margin-bottom: 10px;
}

.video-item {
    background: #1c1c1c;
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 8px;
    cursor: pointer;
}

.video-item a {
    color: white;
    text-decoration: none;
}

.video-item:hover {
    background: #2c5364;
}
</style>
</head>

<body>

<div class="card">
    <!-- VIDEO -->
    <video controls>
        <source src="/videos/<%= video.filename %>" type="video/mp4">
    </video>

    <!-- Like / Subscribe -->
    <div class="actions">
        <form method="POST" action="/like/<%= video.id %>" style="display:inline">
            <button type="submit" onclick="like(this)">‚ù§Ô∏è <%= video.likes %></button>
        </form>

        <form method="POST" action="/subscribe/admin" style="display:inline">
            <button type="submit" onclick="subscribe(this)">üîî Subscribe</button>
        </form>
    </div>

    <!-- Extra actions -->
    <div class="extra-actions">
        <span onclick="alert('Saved to Watch Later ‚è∞')">‚è∞ Watch Later</span>
        <span onclick="alert('Added to Favourites ‚≠ê')">‚≠ê Favourite</span>
    </div>

    <!-- Description -->
    <div class="description">
        <strong>Description:</strong><br>
        This is a video about <%= video.title %>. Learn new things and enjoy!
    </div>

    <!-- Comments -->
    <div class="comments">
        <form method="POST" action="/comment/<%= video.id %>">
            <input type="text" name="comment" placeholder="Add a comment..." required>
            <button type="submit">Post</button>
        </form>

        <div class="comment-list">
            <% if(video.comments.length > 0) { %>
                <% video.comments.forEach(c => { %>
                    <p>üí¨ <%= c %></p>
                <% }) %>
            <% } else { %>
                <p>No comments yet</p>
            <% } %>
        </div>
    </div>

    <!-- Recommended videos -->
    <div class="recommend">
        <h3>‚ñ∂ Recommended Videos</h3>
        <% videos.forEach(v => { %>
            <% if(v.id !== video.id) { %>
                <div class="video-item">
                    <a href="/watch/<%= v.id %>"><%= v.title %></a>
                </div>
            <% } %>
        <% }) %>
    </div>
</div>

<script>
// Animations for Like & Subscribe
function like(btn){
    let h = document.createElement("div");
    h.innerHTML = "‚ù§Ô∏è";
    h.className = "heart";
    btn.appendChild(h);
    setTimeout(()=>h.remove(),800);
}

function subscribe(btn){
    let t = document.createElement("div");
    t.innerHTML = "üîî";
    t.className = "thumb";
    btn.appendChild(t);
    setTimeout(()=>t.remove(),1000);
}
</script>

</body>
</html>
